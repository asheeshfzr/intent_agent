version: '3.8'
services:
  api:
    build: .
    container_name: intent-agent-api
    environment:
      - AGENT_HOST=0.0.0.0
      - AGENT_PORT=8000
      - METRICS_MOCK_HOST=metrics-mock
      - METRICS_MOCK_PORT=9000
      - DOCS_MOCK_HOST=docs-mock
      - DOCS_MOCK_PORT=9010
      - USE_QDRANT=false
      - USE_LANGCHAIN=true
    ports:
      - "8000:8000"
    depends_on:
      - metrics-mock
      - docs-mock
  metrics-mock:
    build: .
    container_name: intent-agent-metrics-mock
    command: uvicorn app.tools.metrics_mock:app --host 0.0.0.0 --port 9000
    ports:
      - "9000:9000"
  docs-mock:
    build: .
    container_name: intent-agent-docs-mock
    command: uvicorn app.tools.docs_mock:app --host 0.0.0.0 --port 9010
    ports:
      - "9010:9010"
  qdrant:
    image: qdrant/qdrant
    container_name: qdrant
    ports:
      - "6333:6333"
      - "6334:6334"
